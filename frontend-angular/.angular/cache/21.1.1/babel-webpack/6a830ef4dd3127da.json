{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ApiService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = `${window.location.protocol}//${window.location.hostname}:8000/api`;\n  }\n  // Projects\n  getProjects() {\n    return this.http.get(`${this.apiUrl}/projects/`);\n  }\n  getProject(id) {\n    return this.http.get(`${this.apiUrl}/projects/${id}/`);\n  }\n  createProject(name, file) {\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('pdf_file', file);\n    return this.http.post(`${this.apiUrl}/projects/`, formData);\n  }\n  deleteProject(id) {\n    return this.http.delete(`${this.apiUrl}/projects/${id}/`);\n  }\n  // Markers\n  getMarkers(projectId) {\n    return this.http.get(`${this.apiUrl}/projects/${projectId}/markers`);\n  }\n  addMarker(projectId, marker) {\n    return this.http.post(`${this.apiUrl}/projects/${projectId}/markers`, marker);\n  }\n  deleteMarker(projectId, markerId) {\n    return this.http.delete(`${this.apiUrl}/projects/${projectId}/markers/${markerId}`);\n  }\n  // Polylines\n  getPolylines(projectId) {\n    return this.http.get(`${this.apiUrl}/projects/${projectId}/polylines`);\n  }\n  addPolyline(projectId, polyline) {\n    return this.http.post(`${this.apiUrl}/projects/${projectId}/polylines`, polyline);\n  }\n  // Scale Calibrations\n  getScaleCalibrations(projectId) {\n    return this.http.get(`${this.apiUrl}/projects/${projectId}/scale-calibrations`);\n  }\n  saveScaleCalibration(projectId, calibration) {\n    return this.http.post(`${this.apiUrl}/projects/${projectId}/scale-calibrations`, calibration);\n  }\n  // Conduits\n  getConduits(projectId) {\n    return this.http.get(`${this.apiUrl}/projects/${projectId}/conduits`);\n  }\n  addConduit(projectId, conduit) {\n    return this.http.post(`${this.apiUrl}/projects/${projectId}/conduits`, conduit);\n  }\n  // Marker Links\n  getMarkerLinks(projectId) {\n    return this.http.get(`${this.apiUrl}/projects/${projectId}/marker-links`);\n  }\n  addMarkerLink(projectId, link) {\n    return this.http.post(`${this.apiUrl}/projects/${projectId}/marker-links`, link);\n  }\n  // PDF\n  getPdf(projectId) {\n    return this.http.get(`${this.apiUrl}/projects/${projectId}/pdf`, {\n      responseType: 'blob'\n    });\n  }\n  // Exports\n  exportCsv(projectId, slackFactor) {\n    let params = new HttpParams();\n    if (slackFactor !== undefined) {\n      params = params.set('slack_factor', slackFactor.toString());\n    }\n    return this.http.get(`${this.apiUrl}/exports/${projectId}/csv`, {\n      params,\n      responseType: 'blob'\n    });\n  }\n  exportJson(projectId, slackFactor) {\n    let params = new HttpParams();\n    if (slackFactor !== undefined) {\n      params = params.set('slack_factor', slackFactor.toString());\n    }\n    return this.http.get(`${this.apiUrl}/exports/${projectId}/json`, {\n      params,\n      responseType: 'blob'\n    });\n  }\n  exportPdf(projectId, pageNumber = 1, pageWidth, pageHeight) {\n    let params = new HttpParams().set('page_number', pageNumber.toString());\n    if (pageWidth !== undefined) {\n      params = params.set('page_width', pageWidth.toString());\n    }\n    if (pageHeight !== undefined) {\n      params = params.set('page_height', pageHeight.toString());\n    }\n    return this.http.get(`${this.apiUrl}/exports/${projectId}/pdf`, {\n      params,\n      responseType: 'blob'\n    });\n  }\n  static {\n    this.ɵfac = function ApiService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ApiService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ApiService,\n      factory: ApiService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["HttpParams","ApiService","constructor","http","apiUrl","window","location","protocol","hostname","getProjects","get","getProject","id","createProject","name","file","formData","FormData","append","post","deleteProject","delete","getMarkers","projectId","addMarker","marker","deleteMarker","markerId","getPolylines","addPolyline","polyline","getScaleCalibrations","saveScaleCalibration","calibration","getConduits","addConduit","conduit","getMarkerLinks","addMarkerLink","link","getPdf","responseType","exportCsv","slackFactor","params","undefined","set","toString","exportJson","exportPdf","pageNumber","pageWidth","pageHeight","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["/home/dfirth2/fiber_route_calculator/frontend-angular/src/app/core/services/api.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n  private apiUrl = `${window.location.protocol}//${window.location.hostname}:8000/api`;\n\n  constructor(private http: HttpClient) {}\n\n  // Projects\n  getProjects(): Observable<any[]> {\n    return this.http.get<any[]>(`${this.apiUrl}/projects/`);\n  }\n\n  getProject(id: number): Observable<any> {\n    return this.http.get<any>(`${this.apiUrl}/projects/${id}/`);\n  }\n\n  createProject(name: string, file: File): Observable<any> {\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('pdf_file', file);\n    return this.http.post<any>(`${this.apiUrl}/projects/`, formData);\n  }\n\n  deleteProject(id: number): Observable<any> {\n    return this.http.delete<any>(`${this.apiUrl}/projects/${id}/`);\n  }\n\n  // Markers\n  getMarkers(projectId: number): Observable<any[]> {\n    return this.http.get<any[]>(`${this.apiUrl}/projects/${projectId}/markers`);\n  }\n\n  addMarker(projectId: number, marker: any): Observable<any> {\n    return this.http.post<any>(`${this.apiUrl}/projects/${projectId}/markers`, marker);\n  }\n\n  deleteMarker(projectId: number, markerId: number): Observable<any> {\n    return this.http.delete<any>(`${this.apiUrl}/projects/${projectId}/markers/${markerId}`);\n  }\n\n  // Polylines\n  getPolylines(projectId: number): Observable<any[]> {\n    return this.http.get<any[]>(`${this.apiUrl}/projects/${projectId}/polylines`);\n  }\n\n  addPolyline(projectId: number, polyline: any): Observable<any> {\n    return this.http.post<any>(`${this.apiUrl}/projects/${projectId}/polylines`, polyline);\n  }\n\n  // Scale Calibrations\n  getScaleCalibrations(projectId: number): Observable<any[]> {\n    return this.http.get<any[]>(`${this.apiUrl}/projects/${projectId}/scale-calibrations`);\n  }\n\n  saveScaleCalibration(projectId: number, calibration: any): Observable<any> {\n    return this.http.post<any>(`${this.apiUrl}/projects/${projectId}/scale-calibrations`, calibration);\n  }\n\n  // Conduits\n  getConduits(projectId: number): Observable<any[]> {\n    return this.http.get<any[]>(`${this.apiUrl}/projects/${projectId}/conduits`);\n  }\n\n  addConduit(projectId: number, conduit: any): Observable<any> {\n    return this.http.post<any>(`${this.apiUrl}/projects/${projectId}/conduits`, conduit);\n  }\n\n  // Marker Links\n  getMarkerLinks(projectId: number): Observable<any[]> {\n    return this.http.get<any[]>(`${this.apiUrl}/projects/${projectId}/marker-links`);\n  }\n\n  addMarkerLink(projectId: number, link: any): Observable<any> {\n    return this.http.post<any>(`${this.apiUrl}/projects/${projectId}/marker-links`, link);\n  }\n\n  // PDF\n  getPdf(projectId: number): Observable<Blob> {\n    return this.http.get(`${this.apiUrl}/projects/${projectId}/pdf`, { responseType: 'blob' });\n  }\n\n  // Exports\n  exportCsv(projectId: number, slackFactor?: number): Observable<Blob> {\n    let params = new HttpParams();\n    if (slackFactor !== undefined) {\n      params = params.set('slack_factor', slackFactor.toString());\n    }\n    return this.http.get(`${this.apiUrl}/exports/${projectId}/csv`, {\n      params,\n      responseType: 'blob'\n    });\n  }\n\n  exportJson(projectId: number, slackFactor?: number): Observable<Blob> {\n    let params = new HttpParams();\n    if (slackFactor !== undefined) {\n      params = params.set('slack_factor', slackFactor.toString());\n    }\n    return this.http.get(`${this.apiUrl}/exports/${projectId}/json`, {\n      params,\n      responseType: 'blob'\n    });\n  }\n\n  exportPdf(projectId: number, pageNumber: number = 1, pageWidth?: number, pageHeight?: number): Observable<Blob> {\n    let params = new HttpParams().set('page_number', pageNumber.toString());\n    if (pageWidth !== undefined) {\n      params = params.set('page_width', pageWidth.toString());\n    }\n    if (pageHeight !== undefined) {\n      params = params.set('page_height', pageHeight.toString());\n    }\n    return this.http.get(`${this.apiUrl}/exports/${projectId}/pdf`, {\n      params,\n      responseType: 'blob'\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}