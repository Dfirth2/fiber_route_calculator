{"ast":null,"code":"import _asyncToGenerator from \"/home/dfirth2/fiber_route_calculator/frontend-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport * as pdfjsLib from 'pdfjs-dist';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = [\"pdfCanvas\"];\nconst _c1 = [\"wrapper\"];\nconst _c2 = [\"overlayCanvas\"];\nfunction PDFViewerComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function PDFViewerComponent_div_27_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      ctx_r2.setMode(\"terminal\");\n      return i0.ɵɵresetView(ctx_r2.showEquipmentMenu = false);\n    });\n    i0.ɵɵtext(2, \"Terminal\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function PDFViewerComponent_div_27_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      ctx_r2.setMode(\"drop\");\n      return i0.ɵɵresetView(ctx_r2.showEquipmentMenu = false);\n    });\n    i0.ɵɵtext(4, \"Drop Pedestal\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function PDFViewerComponent_div_27_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      ctx_r2.setMode(\"conduit\");\n      return i0.ɵɵresetView(ctx_r2.showEquipmentMenu = false);\n    });\n    i0.ɵɵtext(6, \"Conduit\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"bg-blue-600\", ctx_r2.mode === \"terminal\")(\"text-white\", ctx_r2.mode === \"terminal\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"bg-blue-600\", ctx_r2.mode === \"drop\")(\"text-white\", ctx_r2.mode === \"drop\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"bg-blue-600\", ctx_r2.mode === \"conduit\")(\"text-white\", ctx_r2.mode === \"conduit\");\n  }\n}\nfunction PDFViewerComponent_button_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function PDFViewerComponent_button_30_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.clearCalibration());\n    });\n    i0.ɵɵtext(1, \"Reset Calibration\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PDFViewerComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Calibrate: click two points on scale, enter real feet.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PDFViewerComponent_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"Scale: \", (ctx_r2.scaleFeetPerPixel * 12).toFixed(4), \" inches/px (\", ctx_r2.scaleFeetPerPixel.toFixed(4), \" ft/px)\");\n  }\n}\nfunction PDFViewerComponent_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.toastMessage, \" \");\n  }\n}\npdfjsLib.GlobalWorkerOptions.workerSrc = '/assets/pdf.worker.min.mjs';\nexport class PDFViewerComponent {\n  constructor() {\n    this.pdfUrl = '';\n    this.pdf = null;\n    this.currentPage = 1;\n    this.zoom = 1;\n    this.panOffset = {\n      x: 0,\n      y: 0\n    };\n    this.isPanning = false;\n    this.Math = Math;\n    this.mode = 'pan';\n    this.calibrationPoints = [];\n    this.scaleFeetPerPixel = null;\n    this.drawingPath = [];\n    this.hoverPoint = null;\n    this.polylines = [];\n    this.totalLengthFeet = 0;\n    this.totalConduitFeet = 0;\n    this.terminals = [];\n    this.drops = [];\n    this.selectedEndpoint = null;\n    this.toastMessage = null;\n    this.showEquipmentMenu = false;\n    this.toastTimer = null;\n    this.renderTask = null;\n    this.lastMouse = {\n      x: 0,\n      y: 0\n    };\n    this.overlayCtx = null;\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (_this.pdfUrl) {\n        yield _this.loadPdf();\n      }\n    })();\n  }\n  ngOnChanges(changes) {\n    if (changes['pdfUrl'] && !changes['pdfUrl'].firstChange && this.pdfUrl) {\n      this.loadPdf();\n    }\n  }\n  loadPdf() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.pdfUrl) return;\n      try {\n        const response = yield fetch(_this2.pdfUrl);\n        if (!response.ok) {\n          console.error('Failed to fetch PDF:', response.status, response.statusText);\n          return;\n        }\n        const blob = yield response.blob();\n        const buffer = yield blob.arrayBuffer();\n        const typedArray = new Uint8Array(buffer);\n        _this2.pdf = yield pdfjsLib.getDocument({\n          data: typedArray\n        }).promise;\n        _this2.currentPage = 1;\n        _this2.panOffset = {\n          x: 0,\n          y: 0\n        };\n        yield _this2.renderPage();\n        _this2.loadCalibration();\n      } catch (error) {\n        console.error('Error loading PDF:', error);\n      }\n    })();\n  }\n  renderPage() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this3.pdf || !_this3.canvasRef) return;\n      if (_this3.renderTask) {\n        try {\n          _this3.renderTask.cancel();\n        } catch (err) {}\n      }\n      try {\n        const page = yield _this3.pdf.getPage(_this3.currentPage);\n        const viewport = page.getViewport({\n          scale: _this3.zoom\n        });\n        const canvas = _this3.canvasRef.nativeElement;\n        const context = canvas.getContext('2d');\n        if (!context) return;\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n        // keep overlay in sync\n        if (_this3.overlayRef) {\n          const overlay = _this3.overlayRef.nativeElement;\n          overlay.width = viewport.width;\n          overlay.height = viewport.height;\n          _this3.overlayCtx = overlay.getContext('2d');\n          _this3.redrawOverlay();\n        }\n        const renderContext = {\n          canvasContext: context,\n          viewport\n        };\n        _this3.renderTask = page.render(renderContext);\n        yield _this3.renderTask.promise;\n      } catch (error) {\n        console.error('Render error:', error);\n      }\n    })();\n  }\n  onMouseDown(event) {\n    if (this.mode === 'pan') {\n      this.isPanning = true;\n      this.lastMouse = {\n        x: event.clientX,\n        y: event.clientY\n      };\n      return;\n    }\n    if (!this.overlayRef) return;\n    const rect = this.overlayRef.nativeElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    const pdfPoint = {\n      x: x / this.zoom,\n      y: y / this.zoom\n    };\n    if (this.mode === 'terminal') {\n      this.terminals.push(pdfPoint);\n      this.redrawOverlay();\n      return;\n    }\n    if (this.mode === 'drop') {\n      this.drops.push(pdfPoint);\n      this.redrawOverlay();\n      return;\n    }\n    if (this.mode === 'calibrate') {\n      this.calibrationPoints.push(pdfPoint);\n      if (this.calibrationPoints.length === 2) {\n        this.finishCalibration();\n      }\n      this.redrawOverlay();\n      return;\n    }\n    if (this.mode === 'fiber') {\n      this.isPanning = false;\n      this.hoverPoint = null;\n      if (this.drawingPath.length === 0) {\n        this.drawingPath = [pdfPoint];\n      } else {\n        this.drawingPath = [...this.drawingPath, pdfPoint];\n      }\n      if (event.detail >= 2) {\n        this.commitDrawingPath();\n      } else {\n        this.redrawOverlay();\n      }\n      return;\n    }\n    if (this.mode === 'conduit') {\n      this.isPanning = false;\n      const start = this.findNearestEndpoint(pdfPoint);\n      if (!this.selectedEndpoint) {\n        if (start) {\n          this.selectedEndpoint = start;\n          this.redrawOverlay();\n        }\n        return;\n      }\n      // second click must land on a drop pedestal\n      const end = this.findNearestEndpoint(pdfPoint, 'drop');\n      if (!end) {\n        this.showToast('Select a drop pedestal to complete the conduit');\n        return;\n      }\n      // enforce terminal->drop or drop->drop; block terminal->terminal\n      if (this.selectedEndpoint.type === 'terminal' && end.type === 'terminal') {\n        this.showToast('Cannot connect terminal to terminal');\n        return;\n      }\n      const path = [this.selectedEndpoint.point, end.point];\n      const lengthFt = this.measurePath(path);\n      this.polylines.push({\n        points: path,\n        lengthFt,\n        type: 'conduit'\n      });\n      this.totalConduitFeet = this.polylines.filter(p => p.type === 'conduit').reduce((sum, p) => sum + p.lengthFt, 0);\n      this.selectedEndpoint = null;\n      this.redrawOverlay();\n      return;\n    }\n    // if we reach here, click is ignored (not in a valid mode)\n  }\n  onMouseMove(event) {\n    if (this.mode === 'pan') {\n      if (!this.isPanning) return;\n      const dx = event.clientX - this.lastMouse.x;\n      const dy = event.clientY - this.lastMouse.y;\n      this.panOffset.x += dx;\n      this.panOffset.y += dy;\n      this.lastMouse = {\n        x: event.clientX,\n        y: event.clientY\n      };\n      return;\n    }\n    if (this.mode === 'fiber' && this.drawingPath.length > 0 && this.overlayRef) {\n      const rect = this.overlayRef.nativeElement.getBoundingClientRect();\n      const x = event.clientX - rect.left;\n      const y = event.clientY - rect.top;\n      this.hoverPoint = {\n        x: x / this.zoom,\n        y: y / this.zoom\n      };\n      this.redrawOverlay();\n    }\n  }\n  onMouseUp() {\n    if (this.mode === 'pan') {\n      this.isPanning = false;\n      return;\n    }\n    if (this.mode === 'fiber' || this.mode === 'conduit') {\n      // Mouse up ends panning only; path commit happens on double-click (fiber) or second click (conduit)\n      return;\n    }\n  }\n  getTransform() {\n    return `translate(${this.panOffset.x}px, ${this.panOffset.y}px)`;\n  }\n  zoomIn() {\n    this.zoom = Math.min(3, this.zoom * 1.2);\n    this.renderPage();\n  }\n  zoomOut() {\n    this.zoom = Math.max(0.5, this.zoom / 1.2);\n    this.renderPage();\n  }\n  setMode(next) {\n    // Require calibration before using drawing tools\n    if (!this.scaleFeetPerPixel && next !== 'calibrate' && next !== 'pan') {\n      this.showToast('Please calibrate the scale first');\n      return;\n    }\n    this.mode = next;\n    this.isPanning = false;\n    // Clear drawing path only when switching to incompatible modes (not when switching to/from pan)\n    if (next !== 'fiber' && next !== 'conduit' && next !== 'pan') {\n      this.drawingPath = [];\n      this.hoverPoint = null;\n    }\n    if (next !== 'conduit' && next !== 'pan') {\n      this.selectedEndpoint = null;\n    }\n    if (next !== 'calibrate') {\n      this.calibrationPoints = [];\n    }\n    this.redrawOverlay();\n  }\n  clearOverlay() {\n    this.polylines = [];\n    this.drawingPath = [];\n    this.hoverPoint = null;\n    this.selectedEndpoint = null;\n    this.toastMessage = null;\n    this.totalLengthFeet = 0;\n    this.totalConduitFeet = 0;\n    this.calibrationPoints = [];\n    this.terminals = [];\n    this.drops = [];\n    this.redrawOverlay();\n  }\n  clearCalibration() {\n    const key = this.getCalibrationKey();\n    localStorage.removeItem(key);\n    this.scaleFeetPerPixel = null;\n    this.showToast('Calibration cleared');\n    this.redrawOverlay();\n  }\n  getCalibrationKey() {\n    // Use the PDF URL as a unique key for this document\n    return `pdf_calibration_${this.pdfUrl}`;\n  }\n  loadCalibration() {\n    const key = this.getCalibrationKey();\n    const saved = localStorage.getItem(key);\n    if (saved) {\n      try {\n        this.scaleFeetPerPixel = parseFloat(saved);\n        this.showToast('Calibration loaded from saved data');\n        this.redrawOverlay();\n      } catch (e) {\n        console.error('Failed to load calibration:', e);\n      }\n    }\n  }\n  saveCalibration() {\n    if (this.scaleFeetPerPixel !== null) {\n      const key = this.getCalibrationKey();\n      localStorage.setItem(key, this.scaleFeetPerPixel.toString());\n    }\n  }\n  finishCalibration() {\n    if (this.calibrationPoints.length !== 2) return;\n    const [p1, p2] = this.calibrationPoints;\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n    const distPx = Math.sqrt(dx * dx + dy * dy);\n    const input = prompt('Enter real-world distance between points (feet):');\n    const feet = input ? parseFloat(input) : NaN;\n    if (!isNaN(feet) && distPx > 0) {\n      this.scaleFeetPerPixel = feet / distPx;\n      this.saveCalibration();\n      this.showToast('Calibration saved');\n    } else {\n      this.scaleFeetPerPixel = null;\n    }\n    this.calibrationPoints = [];\n  }\n  measurePath(path) {\n    let px = 0;\n    for (let i = 1; i < path.length; i++) {\n      const dx = path[i].x - path[i - 1].x;\n      const dy = path[i].y - path[i - 1].y;\n      px += Math.sqrt(dx * dx + dy * dy);\n    }\n    if (this.scaleFeetPerPixel) {\n      return px * this.scaleFeetPerPixel;\n    }\n    return 0;\n  }\n  commitDrawingPath() {\n    if ((this.mode === 'fiber' || this.mode === 'conduit') && this.drawingPath.length > 1) {\n      const lengthFt = this.measurePath(this.drawingPath);\n      this.polylines.push({\n        points: [...this.drawingPath],\n        lengthFt,\n        type: this.mode\n      });\n      this.totalLengthFeet = this.polylines.filter(p => p.type === 'fiber').reduce((sum, p) => sum + p.lengthFt, 0);\n      this.totalConduitFeet = this.polylines.filter(p => p.type === 'conduit').reduce((sum, p) => sum + p.lengthFt, 0);\n      if (this.mode === 'fiber') {\n        this.showToast(`Fiber route saved: ${lengthFt.toFixed(1)} ft`);\n      }\n    }\n    this.drawingPath = [];\n    this.hoverPoint = null;\n    this.redrawOverlay();\n  }\n  redrawOverlay() {\n    if (!this.overlayCtx || !this.overlayRef) return;\n    const ctx = this.overlayCtx;\n    const overlay = this.overlayRef.nativeElement;\n    ctx.clearRect(0, 0, overlay.width, overlay.height);\n    // calibration points\n    ctx.fillStyle = '#f97316';\n    this.calibrationPoints.forEach(p => {\n      ctx.beginPath();\n      ctx.arc(p.x * this.zoom, p.y * this.zoom, 5, 0, Math.PI * 2);\n      ctx.fill();\n    });\n    // polylines\n    this.polylines.forEach(line => {\n      if (line.points.length < 2) return;\n      ctx.strokeStyle = line.type === 'fiber' ? '#2563eb' : '#9333ea';\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.moveTo(line.points[0].x * this.zoom, line.points[0].y * this.zoom);\n      for (let i = 1; i < line.points.length; i++) {\n        ctx.lineTo(line.points[i].x * this.zoom, line.points[i].y * this.zoom);\n      }\n      ctx.stroke();\n    });\n    // current drawing\n    if (this.drawingPath.length > 0) {\n      ctx.strokeStyle = '#10b981';\n      ctx.lineWidth = 2;\n      ctx.setLineDash([6, 4]);\n      ctx.beginPath();\n      ctx.moveTo(this.drawingPath[0].x * this.zoom, this.drawingPath[0].y * this.zoom);\n      for (let i = 1; i < this.drawingPath.length; i++) {\n        ctx.lineTo(this.drawingPath[i].x * this.zoom, this.drawingPath[i].y * this.zoom);\n      }\n      // preview to hover point while placing vertices\n      if (this.hoverPoint) {\n        ctx.lineTo(this.hoverPoint.x * this.zoom, this.hoverPoint.y * this.zoom);\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n    }\n    // selected terminal highlight\n    if (this.selectedEndpoint) {\n      ctx.strokeStyle = '#22c55e';\n      ctx.lineWidth = 3;\n      ctx.beginPath();\n      ctx.arc(this.selectedEndpoint.point.x * this.zoom, this.selectedEndpoint.point.y * this.zoom, 10, 0, Math.PI * 2);\n      ctx.stroke();\n    }\n    // markers\n    this.terminals.forEach(pt => this.drawTerminal(pt));\n    this.drops.forEach(pt => this.drawMarker(pt, '#a855f7'));\n  }\n  findNearestEndpoint(target, requiredType) {\n    const hitRadius = 12 / this.zoom;\n    const candidates = [];\n    if (!requiredType || requiredType === 'drop') {\n      this.drops.forEach(p => candidates.push({\n        point: p,\n        type: 'drop'\n      }));\n    }\n    if (!requiredType) {\n      this.terminals.forEach(p => candidates.push({\n        point: p,\n        type: 'terminal'\n      }));\n    }\n    let closest = null;\n    let best = Number.MAX_VALUE;\n    candidates.forEach(c => {\n      const dx = c.point.x - target.x;\n      const dy = c.point.y - target.y;\n      const dist = Math.sqrt(dx * dx + dy * dy);\n      if (dist < best && dist <= hitRadius) {\n        best = dist;\n        closest = c;\n      }\n    });\n    return closest;\n  }\n  showToast(message) {\n    this.toastMessage = message;\n    if (this.toastTimer) {\n      clearTimeout(this.toastTimer);\n    }\n    this.toastTimer = setTimeout(() => {\n      this.toastMessage = null;\n    }, 2200);\n  }\n  drawTerminal(pt) {\n    if (!this.overlayCtx) return;\n    const size = 15;\n    const height = size * Math.sqrt(3);\n    const centerX = pt.x * this.zoom;\n    const centerY = pt.y * this.zoom;\n    this.overlayCtx.fillStyle = '#10b981';\n    this.overlayCtx.strokeStyle = '#ffffff';\n    this.overlayCtx.lineWidth = 2;\n    this.overlayCtx.beginPath();\n    this.overlayCtx.moveTo(centerX, centerY - 2 * height / 3);\n    this.overlayCtx.lineTo(centerX - size, centerY + height / 3);\n    this.overlayCtx.lineTo(centerX + size, centerY + height / 3);\n    this.overlayCtx.closePath();\n    this.overlayCtx.fill();\n    this.overlayCtx.stroke();\n  }\n  drawMarker(pt, color) {\n    if (!this.overlayCtx) return;\n    this.overlayCtx.fillStyle = color;\n    this.overlayCtx.strokeStyle = '#ffffff';\n    this.overlayCtx.lineWidth = 2;\n    this.overlayCtx.beginPath();\n    this.overlayCtx.arc(pt.x * this.zoom, pt.y * this.zoom, 12, 0, Math.PI * 2);\n    this.overlayCtx.fill();\n    this.overlayCtx.stroke();\n  }\n  nextPage() {\n    if (this.pdf && this.currentPage < this.pdf.numPages) {\n      this.currentPage++;\n      this.renderPage();\n    }\n  }\n  prevPage() {\n    if (this.pdf && this.currentPage > 1) {\n      this.currentPage--;\n      this.renderPage();\n    }\n  }\n  static {\n    this.ɵfac = function PDFViewerComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PDFViewerComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PDFViewerComponent,\n      selectors: [[\"app-pdf-viewer\"]],\n      viewQuery: function PDFViewerComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5)(_c1, 5)(_c2, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvasRef = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.wrapperRef = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.overlayRef = _t.first);\n        }\n      },\n      inputs: {\n        pdfUrl: \"pdfUrl\"\n      },\n      features: [i0.ɵɵNgOnChangesFeature],\n      decls: 48,\n      vars: 36,\n      consts: [[\"wrapper\", \"\"], [\"pdfCanvas\", \"\"], [\"overlayCanvas\", \"\"], [1, \"flex\", \"flex-col\", \"h-full\", \"w-full\"], [1, \"bg-white\", \"border-b\", \"shadow\", \"flex\", \"flex-col\", \"gap-2\", \"p-3\"], [1, \"flex\", \"flex-wrap\", \"gap-2\"], [1, \"flex\", \"gap-1\", \"items-center\"], [1, \"px-3\", \"py-1\", \"bg-gray-200\", \"rounded\", \"hover:bg-gray-300\", \"disabled:opacity-50\", 3, \"click\", \"disabled\"], [1, \"px-3\", \"py-1\", \"text-sm\", \"whitespace-nowrap\"], [1, \"px-3\", \"py-1\", \"bg-gray-200\", \"rounded\", \"hover:bg-gray-300\", 3, \"click\"], [1, \"px-3\", \"py-1\", \"text-sm\", \"w-16\", \"text-center\"], [1, \"border-l\"], [1, \"px-3\", \"py-1\", \"rounded\", \"border\", 3, \"click\"], [1, \"px-3\", \"py-1\", \"rounded\", \"border\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", 3, \"click\", \"disabled\"], [1, \"relative\"], [1, \"px-3\", \"py-1\", \"rounded\", \"border\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", \"hover:bg-gray-100\", 3, \"click\", \"disabled\"], [\"class\", \"absolute top-full mt-1 bg-white border rounded shadow z-10 w-40\", 4, \"ngIf\"], [\"class\", \"px-3 py-1 rounded border text-sm text-gray-600\", 3, \"click\", 4, \"ngIf\"], [1, \"text-xs\", \"text-gray-700\", \"flex\", \"flex-wrap\", \"gap-x-4\", \"gap-y-1\"], [4, \"ngIf\"], [1, \"relative\", \"bg-gray-100\", \"flex-1\", \"overflow-hidden\", \"flex\", \"items-center\", \"justify-center\", 3, \"mousedown\", \"mousemove\", \"mouseup\", \"mouseleave\"], [1, \"transition-transform\"], [1, \"bg-white\", \"block\"], [1, \"absolute\", \"inset-0\", \"pointer-events-auto\"], [\"class\", \"absolute top-2 left-1/2 -translate-x-1/2 bg-rose-600 text-white px-4 py-2 rounded shadow text-sm pointer-events-none\", 4, \"ngIf\"], [1, \"absolute\", \"top-full\", \"mt-1\", \"bg-white\", \"border\", \"rounded\", \"shadow\", \"z-10\", \"w-40\"], [1, \"block\", \"w-full\", \"text-left\", \"px-4\", \"py-2\", \"hover:bg-gray-100\", \"border-b\", 3, \"click\"], [1, \"block\", \"w-full\", \"text-left\", \"px-4\", \"py-2\", \"hover:bg-gray-100\", 3, \"click\"], [1, \"px-3\", \"py-1\", \"rounded\", \"border\", \"text-sm\", \"text-gray-600\", 3, \"click\"], [1, \"absolute\", \"top-2\", \"left-1/2\", \"-translate-x-1/2\", \"bg-rose-600\", \"text-white\", \"px-4\", \"py-2\", \"rounded\", \"shadow\", \"text-sm\", \"pointer-events-none\"]],\n      template: function PDFViewerComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"div\", 5)(3, \"div\", 6)(4, \"button\", 7);\n          i0.ɵɵlistener(\"click\", function PDFViewerComponent_Template_button_click_4_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.prevPage());\n          });\n          i0.ɵɵtext(5, \"<\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"span\", 8);\n          i0.ɵɵtext(7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"button\", 7);\n          i0.ɵɵlistener(\"click\", function PDFViewerComponent_Template_button_click_8_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.nextPage());\n          });\n          i0.ɵɵtext(9, \">\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 6)(11, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function PDFViewerComponent_Template_button_click_11_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.zoomOut());\n          });\n          i0.ɵɵtext(12, \"\\u2212\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"span\", 10);\n          i0.ɵɵtext(14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function PDFViewerComponent_Template_button_click_15_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.zoomIn());\n          });\n          i0.ɵɵtext(16, \"+\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(17, \"div\", 11);\n          i0.ɵɵelementStart(18, \"button\", 12);\n          i0.ɵɵlistener(\"click\", function PDFViewerComponent_Template_button_click_18_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.setMode(\"pan\"));\n          });\n          i0.ɵɵtext(19, \"Pan\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"button\", 12);\n          i0.ɵɵlistener(\"click\", function PDFViewerComponent_Template_button_click_20_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.setMode(\"calibrate\"));\n          });\n          i0.ɵɵtext(21, \"Calibrate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function PDFViewerComponent_Template_button_click_22_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.setMode(\"fiber\"));\n          });\n          i0.ɵɵtext(23, \"Draw Fiber\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"div\", 14)(25, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function PDFViewerComponent_Template_button_click_25_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.showEquipmentMenu = !ctx.showEquipmentMenu);\n          });\n          i0.ɵɵtext(26, \"Equipment \\u25BC\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(27, PDFViewerComponent_div_27_Template, 7, 12, \"div\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"button\", 12);\n          i0.ɵɵlistener(\"click\", function PDFViewerComponent_Template_button_click_28_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.clearOverlay());\n          });\n          i0.ɵɵtext(29, \"Clear\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(30, PDFViewerComponent_button_30_Template, 2, 0, \"button\", 17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"div\", 18);\n          i0.ɵɵtemplate(32, PDFViewerComponent_div_32_Template, 2, 0, \"div\", 19)(33, PDFViewerComponent_div_33_Template, 2, 2, \"div\", 19);\n          i0.ɵɵelementStart(34, \"div\");\n          i0.ɵɵtext(35);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"div\");\n          i0.ɵɵtext(37);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"div\");\n          i0.ɵɵtext(39);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(40, \"div\", 20);\n          i0.ɵɵlistener(\"mousedown\", function PDFViewerComponent_Template_div_mousedown_40_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onMouseDown($event));\n          })(\"mousemove\", function PDFViewerComponent_Template_div_mousemove_40_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onMouseMove($event));\n          })(\"mouseup\", function PDFViewerComponent_Template_div_mouseup_40_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onMouseUp());\n          })(\"mouseleave\", function PDFViewerComponent_Template_div_mouseleave_40_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onMouseUp());\n          });\n          i0.ɵɵelementStart(41, \"div\", 21, 0);\n          i0.ɵɵelement(43, \"canvas\", 22, 1)(45, \"canvas\", 23, 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(47, PDFViewerComponent_div_47_Template, 2, 1, \"div\", 24);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", ctx.currentPage <= 1);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate2(\"Page \", ctx.currentPage, \" / \", (ctx.pdf == null ? null : ctx.pdf.numPages) || 1);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.currentPage >= ((ctx.pdf == null ? null : ctx.pdf.numPages) || 1));\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\"\", ctx.Math.round(ctx.zoom * 100), \"%\");\n          i0.ɵɵadvance(4);\n          i0.ɵɵclassProp(\"bg-blue-600\", ctx.mode === \"pan\")(\"text-white\", ctx.mode === \"pan\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"bg-blue-600\", ctx.mode === \"calibrate\")(\"text-white\", ctx.mode === \"calibrate\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"bg-blue-600\", ctx.mode === \"fiber\")(\"text-white\", ctx.mode === \"fiber\");\n          i0.ɵɵproperty(\"disabled\", !ctx.scaleFeetPerPixel);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", !ctx.scaleFeetPerPixel);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.showEquipmentMenu);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.scaleFeetPerPixel);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", !ctx.scaleFeetPerPixel);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.scaleFeetPerPixel);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Fiber total: \", ctx.totalLengthFeet.toFixed(1), \" ft\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Conduit total: \", ctx.totalConduitFeet.toFixed(1), \" ft\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate2(\"Markers: \", ctx.terminals.length, \" terminals, \", ctx.drops.length, \" drops\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵstyleProp(\"transform\", ctx.getTransform())(\"transition-duration\", ctx.isPanning ? \"0ms\" : \"100ms\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵstyleProp(\"cursor\", ctx.isPanning ? \"grabbing\" : \"grab\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵstyleProp(\"cursor\", ctx.mode === \"fiber\" || ctx.mode === \"conduit\" || ctx.mode === \"calibrate\" ? \"crosshair\" : \"auto\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.toastMessage);\n        }\n      },\n      dependencies: [CommonModule, i1.NgIf],\n      styles: [\"[_nghost-%COMP%] {\\n      display: flex;\\n      height: 100%;\\n      width: 100%;\\n    }\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wZGYtdmlld2VyL3BkZi12aWV3ZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7SUFDSTtNQUNFLGFBQWE7TUFDYixZQUFZO01BQ1osV0FBVztJQUNiIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgOmhvc3Qge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","pdfjsLib","i0","ɵɵelementStart","ɵɵlistener","PDFViewerComponent_div_27_Template_button_click_1_listener","ɵɵrestoreView","_r2","ctx_r2","ɵɵnextContext","setMode","ɵɵresetView","showEquipmentMenu","ɵɵtext","ɵɵelementEnd","PDFViewerComponent_div_27_Template_button_click_3_listener","PDFViewerComponent_div_27_Template_button_click_5_listener","ɵɵadvance","ɵɵclassProp","mode","PDFViewerComponent_button_30_Template_button_click_0_listener","_r4","clearCalibration","ɵɵtextInterpolate2","scaleFeetPerPixel","toFixed","ɵɵtextInterpolate1","toastMessage","GlobalWorkerOptions","workerSrc","PDFViewerComponent","constructor","pdfUrl","pdf","currentPage","zoom","panOffset","x","y","isPanning","Math","calibrationPoints","drawingPath","hoverPoint","polylines","totalLengthFeet","totalConduitFeet","terminals","drops","selectedEndpoint","toastTimer","renderTask","lastMouse","overlayCtx","ngOnInit","_this","_asyncToGenerator","loadPdf","ngOnChanges","changes","firstChange","_this2","response","fetch","ok","console","error","status","statusText","blob","buffer","arrayBuffer","typedArray","Uint8Array","getDocument","data","promise","renderPage","loadCalibration","_this3","canvasRef","cancel","err","page","getPage","viewport","getViewport","scale","canvas","nativeElement","context","getContext","width","height","overlayRef","overlay","redrawOverlay","renderContext","canvasContext","render","onMouseDown","event","clientX","clientY","rect","getBoundingClientRect","left","top","pdfPoint","push","length","finishCalibration","detail","commitDrawingPath","start","findNearestEndpoint","end","showToast","type","path","point","lengthFt","measurePath","points","filter","p","reduce","sum","onMouseMove","dx","dy","onMouseUp","getTransform","zoomIn","min","zoomOut","max","next","clearOverlay","key","getCalibrationKey","localStorage","removeItem","saved","getItem","parseFloat","e","saveCalibration","setItem","toString","p1","p2","distPx","sqrt","input","prompt","feet","NaN","isNaN","px","i","ctx","clearRect","fillStyle","forEach","beginPath","arc","PI","fill","line","strokeStyle","lineWidth","moveTo","lineTo","stroke","setLineDash","pt","drawTerminal","drawMarker","target","requiredType","hitRadius","candidates","closest","best","Number","MAX_VALUE","c","dist","message","clearTimeout","setTimeout","size","centerX","centerY","closePath","color","nextPage","numPages","prevPage","selectors","viewQuery","PDFViewerComponent_Query","rf","PDFViewerComponent_Template_button_click_4_listener","_r1","PDFViewerComponent_Template_button_click_8_listener","PDFViewerComponent_Template_button_click_11_listener","PDFViewerComponent_Template_button_click_15_listener","ɵɵelement","PDFViewerComponent_Template_button_click_18_listener","PDFViewerComponent_Template_button_click_20_listener","PDFViewerComponent_Template_button_click_22_listener","PDFViewerComponent_Template_button_click_25_listener","ɵɵtemplate","PDFViewerComponent_div_27_Template","PDFViewerComponent_Template_button_click_28_listener","PDFViewerComponent_button_30_Template","PDFViewerComponent_div_32_Template","PDFViewerComponent_div_33_Template","PDFViewerComponent_Template_div_mousedown_40_listener","$event","PDFViewerComponent_Template_div_mousemove_40_listener","PDFViewerComponent_Template_div_mouseup_40_listener","PDFViewerComponent_Template_div_mouseleave_40_listener","PDFViewerComponent_div_47_Template","ɵɵproperty","round","ɵɵstyleProp","i1","NgIf","styles"],"sources":["/home/dfirth2/fiber_route_calculator/frontend-angular/src/app/components/pdf-viewer/pdf-viewer.component.ts"],"sourcesContent":["import { Component, Input, OnChanges, OnInit, SimpleChanges, ViewChild, ElementRef } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport * as pdfjsLib from 'pdfjs-dist';\n\npdfjsLib.GlobalWorkerOptions.workerSrc = '/assets/pdf.worker.min.mjs';\n\n@Component({\n  selector: 'app-pdf-viewer',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <div class=\"flex flex-col h-full w-full\">\n      <!-- Toolbar -->\n      <div class=\"bg-white border-b shadow flex flex-col gap-2 p-3\">\n        <div class=\"flex flex-wrap gap-2\">\n          <div class=\"flex gap-1 items-center\">\n            <button (click)=\"prevPage()\" [disabled]=\"currentPage <= 1\" class=\"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50\">&lt;</button>\n            <span class=\"px-3 py-1 text-sm whitespace-nowrap\">Page {{ currentPage }} / {{ pdf?.numPages || 1 }}</span>\n            <button (click)=\"nextPage()\" [disabled]=\"currentPage >= (pdf?.numPages || 1)\" class=\"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50\">&gt;</button>\n          </div>\n          <div class=\"flex gap-1 items-center\">\n            <button (click)=\"zoomOut()\" class=\"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300\">−</button>\n            <span class=\"px-3 py-1 text-sm w-16 text-center\">{{ Math.round(zoom * 100) }}%</span>\n            <button (click)=\"zoomIn()\" class=\"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300\">+</button>\n          </div>\n          <div class=\"border-l\"></div>\n          <button (click)=\"setMode('pan')\" [class.bg-blue-600]=\"mode==='pan'\" [class.text-white]=\"mode==='pan'\" class=\"px-3 py-1 rounded border\">Pan</button>\n          <button (click)=\"setMode('calibrate')\" [class.bg-blue-600]=\"mode==='calibrate'\" [class.text-white]=\"mode==='calibrate'\" class=\"px-3 py-1 rounded border\">Calibrate</button>\n          <button (click)=\"setMode('fiber')\"\n            [disabled]=\"!scaleFeetPerPixel\"\n            [class.bg-blue-600]=\"mode==='fiber'\"\n            [class.text-white]=\"mode==='fiber'\"\n            class=\"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed\">Draw Fiber</button>\n          \n          <!-- Equipment Menu -->\n          <div class=\"relative\">\n            <button (click)=\"showEquipmentMenu = !showEquipmentMenu\"\n              [disabled]=\"!scaleFeetPerPixel\"\n              class=\"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100\">Equipment ▼</button>\n            <div *ngIf=\"showEquipmentMenu\" class=\"absolute top-full mt-1 bg-white border rounded shadow z-10 w-40\">\n              <button (click)=\"setMode('terminal'); showEquipmentMenu = false\"\n                [class.bg-blue-600]=\"mode==='terminal'\"\n                [class.text-white]=\"mode==='terminal'\"\n                class=\"block w-full text-left px-4 py-2 hover:bg-gray-100 border-b\">Terminal</button>\n              <button (click)=\"setMode('drop'); showEquipmentMenu = false\"\n                [class.bg-blue-600]=\"mode==='drop'\"\n                [class.text-white]=\"mode==='drop'\"\n                class=\"block w-full text-left px-4 py-2 hover:bg-gray-100 border-b\">Drop Pedestal</button>\n              <button (click)=\"setMode('conduit'); showEquipmentMenu = false\"\n                [class.bg-blue-600]=\"mode==='conduit'\"\n                [class.text-white]=\"mode==='conduit'\"\n                class=\"block w-full text-left px-4 py-2 hover:bg-gray-100\">Conduit</button>\n            </div>\n          </div>\n          <button (click)=\"clearOverlay()\" class=\"px-3 py-1 rounded border\">Clear</button>\n          <button (click)=\"clearCalibration()\" *ngIf=\"scaleFeetPerPixel\" class=\"px-3 py-1 rounded border text-sm text-gray-600\">Reset Calibration</button>\n        </div>\n        <div class=\"text-xs text-gray-700 flex flex-wrap gap-x-4 gap-y-1\">\n          <div *ngIf=\"!scaleFeetPerPixel\">Calibrate: click two points on scale, enter real feet.</div>\n          <div *ngIf=\"scaleFeetPerPixel\">Scale: {{ (scaleFeetPerPixel*12).toFixed(4) }} inches/px ({{ (scaleFeetPerPixel).toFixed(4) }} ft/px)</div>\n          <div>Fiber total: {{ totalLengthFeet.toFixed(1) }} ft</div>\n          <div>Conduit total: {{ totalConduitFeet.toFixed(1) }} ft</div>\n          <div>Markers: {{ terminals.length }} terminals, {{ drops.length }} drops</div>\n        </div>\n      </div>\n\n      <!-- PDF Viewer -->\n      <div\n        class=\"relative bg-gray-100 flex-1 overflow-hidden flex items-center justify-center\"\n        (mousedown)=\"onMouseDown($event)\"\n        (mousemove)=\"onMouseMove($event)\"\n        (mouseup)=\"onMouseUp()\"\n        (mouseleave)=\"onMouseUp()\"\n      >\n        <div\n          #wrapper\n          class=\"transition-transform\"\n          [style.transform]=\"getTransform()\"\n          [style.transitionDuration]=\"isPanning ? '0ms' : '100ms'\"\n        >\n          <canvas #pdfCanvas class=\"bg-white block\" [style.cursor]=\"isPanning ? 'grabbing' : 'grab'\"></canvas>\n          <canvas\n            #overlayCanvas\n            class=\"absolute inset-0 pointer-events-auto\"\n            [style.cursor]=\"(mode === 'fiber' || mode === 'conduit' || mode === 'calibrate') ? 'crosshair' : 'auto'\"\n          ></canvas>\n        </div>\n\n        <div *ngIf=\"toastMessage\" class=\"absolute top-2 left-1/2 -translate-x-1/2 bg-rose-600 text-white px-4 py-2 rounded shadow text-sm pointer-events-none\">\n          {{ toastMessage }}\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    :host {\n      display: flex;\n      height: 100%;\n      width: 100%;\n    }\n  `]\n})\nexport class PDFViewerComponent implements OnInit, OnChanges {\n  @ViewChild('pdfCanvas') canvasRef!: ElementRef<HTMLCanvasElement>;\n  @ViewChild('wrapper') wrapperRef!: ElementRef<HTMLDivElement>;\n  @ViewChild('overlayCanvas') overlayRef!: ElementRef<HTMLCanvasElement>;\n  @Input() pdfUrl: string = '';\n\n  pdf: any = null;\n  currentPage = 1;\n  zoom = 1;\n  panOffset = { x: 0, y: 0 };\n  isPanning = false;\n  Math = Math;\n\n  mode: 'pan' | 'calibrate' | 'fiber' | 'conduit' | 'terminal' | 'drop' = 'pan';\n  calibrationPoints: { x: number; y: number }[] = [];\n  scaleFeetPerPixel: number | null = null;\n  drawingPath: { x: number; y: number }[] = [];\n  hoverPoint: { x: number; y: number } | null = null;\n  polylines: { points: { x: number; y: number }[]; lengthFt: number; type: 'fiber' | 'conduit' }[] = [];\n  totalLengthFeet = 0;\n  totalConduitFeet = 0;\n  terminals: { x: number; y: number }[] = [];\n  drops: { x: number; y: number }[] = [];\n  selectedEndpoint: { point: { x: number; y: number }; type: 'terminal' | 'drop' } | null = null;\n  toastMessage: string | null = null;\n  showEquipmentMenu = false;\n  private toastTimer: any = null;\n\n  private renderTask: any = null;\n  private lastMouse = { x: 0, y: 0 };\n  private overlayCtx: CanvasRenderingContext2D | null = null;\n\n  async ngOnInit() {\n    if (this.pdfUrl) {\n      await this.loadPdf();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['pdfUrl'] && !changes['pdfUrl'].firstChange && this.pdfUrl) {\n      this.loadPdf();\n    }\n  }\n\n  async loadPdf() {\n    if (!this.pdfUrl) return;\n    try {\n      const response = await fetch(this.pdfUrl);\n      if (!response.ok) {\n        console.error('Failed to fetch PDF:', response.status, response.statusText);\n        return;\n      }\n      const blob = await response.blob();\n      const buffer = await blob.arrayBuffer();\n      const typedArray = new Uint8Array(buffer);\n      this.pdf = await pdfjsLib.getDocument({ data: typedArray }).promise;\n      this.currentPage = 1;\n      this.panOffset = { x: 0, y: 0 };\n      await this.renderPage();\n      this.loadCalibration();\n    } catch (error) {\n      console.error('Error loading PDF:', error);\n    }\n  }\n\n  async renderPage() {\n    if (!this.pdf || !this.canvasRef) return;\n\n    if (this.renderTask) {\n      try {\n        this.renderTask.cancel();\n      } catch (err) {}\n    }\n\n    try {\n      const page = await this.pdf.getPage(this.currentPage);\n      const viewport = page.getViewport({ scale: this.zoom });\n\n      const canvas = this.canvasRef.nativeElement;\n      const context = canvas.getContext('2d');\n      if (!context) return;\n\n      canvas.width = viewport.width;\n      canvas.height = viewport.height;\n\n      // keep overlay in sync\n      if (this.overlayRef) {\n        const overlay = this.overlayRef.nativeElement;\n        overlay.width = viewport.width;\n        overlay.height = viewport.height;\n        this.overlayCtx = overlay.getContext('2d');\n        this.redrawOverlay();\n      }\n\n      const renderContext = { canvasContext: context, viewport };\n      this.renderTask = page.render(renderContext);\n      await this.renderTask.promise;\n    } catch (error) {\n      console.error('Render error:', error);\n    }\n  }\n\n  onMouseDown(event: MouseEvent) {\n    if (this.mode === 'pan') {\n      this.isPanning = true;\n      this.lastMouse = { x: event.clientX, y: event.clientY };\n      return;\n    }\n\n    if (!this.overlayRef) return;\n    const rect = this.overlayRef.nativeElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    const pdfPoint = { x: x / this.zoom, y: y / this.zoom };\n\n    if (this.mode === 'terminal') {\n      this.terminals.push(pdfPoint);\n      this.redrawOverlay();\n      return;\n    }\n\n    if (this.mode === 'drop') {\n      this.drops.push(pdfPoint);\n      this.redrawOverlay();\n      return;\n    }\n\n    if (this.mode === 'calibrate') {\n      this.calibrationPoints.push(pdfPoint);\n      if (this.calibrationPoints.length === 2) {\n        this.finishCalibration();\n      }\n      this.redrawOverlay();\n      return;\n    }\n\n    if (this.mode === 'fiber') {\n      this.isPanning = false;\n      this.hoverPoint = null;\n      if (this.drawingPath.length === 0) {\n        this.drawingPath = [pdfPoint];\n      } else {\n        this.drawingPath = [...this.drawingPath, pdfPoint];\n      }\n\n      if (event.detail >= 2) {\n        this.commitDrawingPath();\n      } else {\n        this.redrawOverlay();\n      }\n      return;\n    }\n\n    if (this.mode === 'conduit') {\n      this.isPanning = false;\n      const start = this.findNearestEndpoint(pdfPoint);\n      if (!this.selectedEndpoint) {\n        if (start) {\n          this.selectedEndpoint = start;\n          this.redrawOverlay();\n        }\n        return;\n      }\n\n      // second click must land on a drop pedestal\n      const end = this.findNearestEndpoint(pdfPoint, 'drop');\n      if (!end) {\n        this.showToast('Select a drop pedestal to complete the conduit');\n        return;\n      }\n\n      // enforce terminal->drop or drop->drop; block terminal->terminal\n      if (this.selectedEndpoint.type === 'terminal' && end.type === 'terminal') {\n        this.showToast('Cannot connect terminal to terminal');\n        return;\n      }\n\n      const path = [this.selectedEndpoint.point, end.point];\n      const lengthFt = this.measurePath(path);\n      this.polylines.push({ points: path, lengthFt, type: 'conduit' });\n      this.totalConduitFeet = this.polylines.filter(p => p.type === 'conduit').reduce((sum, p) => sum + p.lengthFt, 0);\n      this.selectedEndpoint = null;\n      this.redrawOverlay();\n      return;\n    }\n\n    // if we reach here, click is ignored (not in a valid mode)\n  }\n\n  onMouseMove(event: MouseEvent) {\n    if (this.mode === 'pan') {\n      if (!this.isPanning) return;\n      const dx = event.clientX - this.lastMouse.x;\n      const dy = event.clientY - this.lastMouse.y;\n      this.panOffset.x += dx;\n      this.panOffset.y += dy;\n      this.lastMouse = { x: event.clientX, y: event.clientY };\n      return;\n    }\n\n    if (this.mode === 'fiber' && this.drawingPath.length > 0 && this.overlayRef) {\n      const rect = this.overlayRef.nativeElement.getBoundingClientRect();\n      const x = event.clientX - rect.left;\n      const y = event.clientY - rect.top;\n      this.hoverPoint = { x: x / this.zoom, y: y / this.zoom };\n      this.redrawOverlay();\n    }\n  }\n\n  onMouseUp() {\n    if (this.mode === 'pan') {\n      this.isPanning = false;\n      return;\n    }\n\n    if (this.mode === 'fiber' || this.mode === 'conduit') {\n      // Mouse up ends panning only; path commit happens on double-click (fiber) or second click (conduit)\n      return;\n    }\n  }\n\n  getTransform(): string {\n    return `translate(${this.panOffset.x}px, ${this.panOffset.y}px)`;\n  }\n\n  zoomIn() {\n    this.zoom = Math.min(3, this.zoom * 1.2);\n    this.renderPage();\n  }\n\n  zoomOut() {\n    this.zoom = Math.max(0.5, this.zoom / 1.2);\n    this.renderPage();\n  }\n\n  setMode(next: 'pan' | 'calibrate' | 'fiber' | 'conduit' | 'terminal' | 'drop') {\n    // Require calibration before using drawing tools\n    if (!this.scaleFeetPerPixel && next !== 'calibrate' && next !== 'pan') {\n      this.showToast('Please calibrate the scale first');\n      return;\n    }\n    this.mode = next;\n    this.isPanning = false;\n    // Clear drawing path only when switching to incompatible modes (not when switching to/from pan)\n    if (next !== 'fiber' && next !== 'conduit' && next !== 'pan') {\n      this.drawingPath = [];\n      this.hoverPoint = null;\n    }\n    if (next !== 'conduit' && next !== 'pan') {\n      this.selectedEndpoint = null;\n    }\n    if (next !== 'calibrate') {\n      this.calibrationPoints = [];\n    }\n    this.redrawOverlay();\n  }\n\n  clearOverlay() {\n    this.polylines = [];\n    this.drawingPath = [];\n    this.hoverPoint = null;\n    this.selectedEndpoint = null;\n    this.toastMessage = null;\n    this.totalLengthFeet = 0;\n    this.totalConduitFeet = 0;\n    this.calibrationPoints = [];\n    this.terminals = [];\n    this.drops = [];\n    this.redrawOverlay();\n  }\n\n  clearCalibration() {\n    const key = this.getCalibrationKey();\n    localStorage.removeItem(key);\n    this.scaleFeetPerPixel = null;\n    this.showToast('Calibration cleared');\n    this.redrawOverlay();\n  }\n\n  private getCalibrationKey(): string {\n    // Use the PDF URL as a unique key for this document\n    return `pdf_calibration_${this.pdfUrl}`;\n  }\n\n  private loadCalibration() {\n    const key = this.getCalibrationKey();\n    const saved = localStorage.getItem(key);\n    if (saved) {\n      try {\n        this.scaleFeetPerPixel = parseFloat(saved);\n        this.showToast('Calibration loaded from saved data');\n        this.redrawOverlay();\n      } catch (e) {\n        console.error('Failed to load calibration:', e);\n      }\n    }\n  }\n\n  private saveCalibration() {\n    if (this.scaleFeetPerPixel !== null) {\n      const key = this.getCalibrationKey();\n      localStorage.setItem(key, this.scaleFeetPerPixel.toString());\n    }\n  }\n\n  private finishCalibration() {\n    if (this.calibrationPoints.length !== 2) return;\n    const [p1, p2] = this.calibrationPoints;\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n    const distPx = Math.sqrt(dx * dx + dy * dy);\n    const input = prompt('Enter real-world distance between points (feet):');\n    const feet = input ? parseFloat(input) : NaN;\n    if (!isNaN(feet) && distPx > 0) {\n      this.scaleFeetPerPixel = feet / distPx;\n      this.saveCalibration();\n      this.showToast('Calibration saved');\n    } else {\n      this.scaleFeetPerPixel = null;\n    }\n    this.calibrationPoints = [];\n  }\n\n  private measurePath(path: { x: number; y: number }[]): number {\n    let px = 0;\n    for (let i = 1; i < path.length; i++) {\n      const dx = path[i].x - path[i - 1].x;\n      const dy = path[i].y - path[i - 1].y;\n      px += Math.sqrt(dx * dx + dy * dy);\n    }\n    if (this.scaleFeetPerPixel) {\n      return px * this.scaleFeetPerPixel;\n    }\n    return 0;\n  }\n\n  private commitDrawingPath() {\n    if ((this.mode === 'fiber' || this.mode === 'conduit') && this.drawingPath.length > 1) {\n      const lengthFt = this.measurePath(this.drawingPath);\n      this.polylines.push({ points: [...this.drawingPath], lengthFt, type: this.mode });\n      this.totalLengthFeet = this.polylines.filter(p => p.type === 'fiber').reduce((sum, p) => sum + p.lengthFt, 0);\n      this.totalConduitFeet = this.polylines.filter(p => p.type === 'conduit').reduce((sum, p) => sum + p.lengthFt, 0);\n      \n      if (this.mode === 'fiber') {\n        this.showToast(`Fiber route saved: ${lengthFt.toFixed(1)} ft`);\n      }\n    }\n    this.drawingPath = [];\n    this.hoverPoint = null;\n    this.redrawOverlay();\n  }\n\n  private redrawOverlay() {\n    if (!this.overlayCtx || !this.overlayRef) return;\n    const ctx = this.overlayCtx;\n    const overlay = this.overlayRef.nativeElement;\n    ctx.clearRect(0, 0, overlay.width, overlay.height);\n\n    // calibration points\n    ctx.fillStyle = '#f97316';\n    this.calibrationPoints.forEach(p => {\n      ctx.beginPath();\n      ctx.arc(p.x * this.zoom, p.y * this.zoom, 5, 0, Math.PI * 2);\n      ctx.fill();\n    });\n\n    // polylines\n    this.polylines.forEach(line => {\n      if (line.points.length < 2) return;\n      ctx.strokeStyle = line.type === 'fiber' ? '#2563eb' : '#9333ea';\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.moveTo(line.points[0].x * this.zoom, line.points[0].y * this.zoom);\n      for (let i = 1; i < line.points.length; i++) {\n        ctx.lineTo(line.points[i].x * this.zoom, line.points[i].y * this.zoom);\n      }\n      ctx.stroke();\n    });\n\n    // current drawing\n    if (this.drawingPath.length > 0) {\n      ctx.strokeStyle = '#10b981';\n      ctx.lineWidth = 2;\n      ctx.setLineDash([6, 4]);\n      ctx.beginPath();\n      ctx.moveTo(this.drawingPath[0].x * this.zoom, this.drawingPath[0].y * this.zoom);\n      for (let i = 1; i < this.drawingPath.length; i++) {\n        ctx.lineTo(this.drawingPath[i].x * this.zoom, this.drawingPath[i].y * this.zoom);\n      }\n\n      // preview to hover point while placing vertices\n      if (this.hoverPoint) {\n        ctx.lineTo(this.hoverPoint.x * this.zoom, this.hoverPoint.y * this.zoom);\n      }\n      ctx.stroke();\n      ctx.setLineDash([]);\n    }\n\n    // selected terminal highlight\n    if (this.selectedEndpoint) {\n      ctx.strokeStyle = '#22c55e';\n      ctx.lineWidth = 3;\n      ctx.beginPath();\n      ctx.arc(this.selectedEndpoint.point.x * this.zoom, this.selectedEndpoint.point.y * this.zoom, 10, 0, Math.PI * 2);\n      ctx.stroke();\n    }\n\n    // markers\n    this.terminals.forEach(pt => this.drawTerminal(pt));\n    this.drops.forEach(pt => this.drawMarker(pt, '#a855f7'));\n  }\n\n  private findNearestEndpoint(target: { x: number; y: number }, requiredType?: 'drop'): { point: { x: number; y: number }; type: 'terminal' | 'drop' } | null {\n    const hitRadius = 12 / this.zoom;\n    const candidates: { point: { x: number; y: number }; type: 'terminal' | 'drop' }[] = [];\n    if (!requiredType || requiredType === 'drop') {\n      this.drops.forEach(p => candidates.push({ point: p, type: 'drop' }));\n    }\n    if (!requiredType) {\n      this.terminals.forEach(p => candidates.push({ point: p, type: 'terminal' }));\n    }\n    let closest: { point: { x: number; y: number }; type: 'terminal' | 'drop' } | null = null;\n    let best = Number.MAX_VALUE;\n    candidates.forEach(c => {\n      const dx = c.point.x - target.x;\n      const dy = c.point.y - target.y;\n      const dist = Math.sqrt(dx * dx + dy * dy);\n      if (dist < best && dist <= hitRadius) {\n        best = dist;\n        closest = c;\n      }\n    });\n    return closest;\n  }\n\n  private showToast(message: string) {\n    this.toastMessage = message;\n    if (this.toastTimer) {\n      clearTimeout(this.toastTimer);\n    }\n    this.toastTimer = setTimeout(() => {\n      this.toastMessage = null;\n    }, 2200);\n  }\n\n  private drawTerminal(pt: { x: number; y: number }) {\n    if (!this.overlayCtx) return;\n    const size = 15;\n    const height = size * Math.sqrt(3);\n    const centerX = pt.x * this.zoom;\n    const centerY = pt.y * this.zoom;\n    this.overlayCtx.fillStyle = '#10b981';\n    this.overlayCtx.strokeStyle = '#ffffff';\n    this.overlayCtx.lineWidth = 2;\n    this.overlayCtx.beginPath();\n    this.overlayCtx.moveTo(centerX, centerY - (2 * height / 3));\n    this.overlayCtx.lineTo(centerX - size, centerY + (height / 3));\n    this.overlayCtx.lineTo(centerX + size, centerY + (height / 3));\n    this.overlayCtx.closePath();\n    this.overlayCtx.fill();\n    this.overlayCtx.stroke();\n  }\n\n  private drawMarker(pt: { x: number; y: number }, color: string) {\n    if (!this.overlayCtx) return;\n    this.overlayCtx.fillStyle = color;\n    this.overlayCtx.strokeStyle = '#ffffff';\n    this.overlayCtx.lineWidth = 2;\n    this.overlayCtx.beginPath();\n    this.overlayCtx.arc(pt.x * this.zoom, pt.y * this.zoom, 12, 0, Math.PI * 2);\n    this.overlayCtx.fill();\n    this.overlayCtx.stroke();\n  }\n\n  nextPage() {\n    if (this.pdf && this.currentPage < this.pdf.numPages) {\n      this.currentPage++;\n      this.renderPage();\n    }\n  }\n\n  prevPage() {\n    if (this.pdf && this.currentPage > 1) {\n      this.currentPage--;\n      this.renderPage();\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}