{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/state.service\";\nconst _c0 = [\"drawingCanvas\"];\nexport class DrawingCanvasComponent {\n  constructor(stateService) {\n    this.stateService = stateService;\n    this.pdfCanvas = null;\n    this.isActive = false;\n    this.projectId = null;\n    this.context = null;\n    this.currentPath = [];\n    this.viewportScale = 1;\n    this.pageDims = {\n      width: 1728,\n      height: 2592\n    };\n    this.isDrawing = false;\n  }\n  ngOnInit() {\n    if (this.viewport) {\n      this.viewportScale = this.viewport.scale || 1;\n      this.pageDims = {\n        width: this.viewport.pageWidth || 1728,\n        height: this.viewport.pageHeight || 2592\n      };\n    }\n  }\n  ngAfterViewInit() {\n    if (!this.pdfCanvas || !this.canvasRef) return;\n    const canvas = this.canvasRef.nativeElement;\n    canvas.width = this.pdfCanvas.width;\n    canvas.height = this.pdfCanvas.height;\n    this.context = canvas.getContext('2d');\n    this.redraw();\n  }\n  ngOnDestroy() {\n    this.context = null;\n  }\n  onCanvasClick(event) {\n    if (!this.isActive) return;\n    const rect = this.canvasRef.nativeElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    const pdfCoord = this.toPdfCoordinates({\n      x,\n      y\n    });\n    // Add marker\n    if (this.projectId) {\n      const marker = {\n        id: Date.now(),\n        project_id: this.projectId,\n        page_number: 1,\n        x: pdfCoord.x,\n        y: pdfCoord.y,\n        marker_type: 'terminal'\n      };\n      this.stateService.addMarker(marker);\n      this.redraw();\n    }\n  }\n  onMouseDown(event) {\n    this.isDrawing = true;\n    this.currentPath = [];\n  }\n  onMouseMove(event) {\n    if (!this.isDrawing) return;\n    const rect = this.canvasRef.nativeElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    this.currentPath.push({\n      x,\n      y\n    });\n    this.redraw();\n  }\n  onMouseUp(event) {\n    if (!this.isDrawing || this.currentPath.length < 2) {\n      this.isDrawing = false;\n      return;\n    }\n    this.isDrawing = false;\n    const pdfPoints = this.currentPath.map(p => this.toPdfCoordinates(p));\n    if (this.projectId) {\n      const polyline = {\n        id: Date.now(),\n        project_id: this.projectId,\n        page_number: 1,\n        name: `Route ${Date.now()}`,\n        points: pdfPoints,\n        length_ft: 0\n      };\n      this.stateService.addPolyline(polyline);\n      this.currentPath = [];\n      this.redraw();\n    }\n  }\n  toPdfCoordinates(canvasPoint) {\n    return {\n      x: canvasPoint.x / this.viewportScale,\n      y: canvasPoint.y / this.viewportScale\n    };\n  }\n  toCanvasCoordinates(pdfPoint) {\n    return {\n      x: pdfPoint.x * this.viewportScale,\n      y: pdfPoint.y * this.viewportScale\n    };\n  }\n  redraw() {\n    if (!this.context || !this.canvasRef) return;\n    const canvas = this.canvasRef.nativeElement;\n    this.context.clearRect(0, 0, canvas.width, canvas.height);\n    // Draw polylines\n    this.stateService.polylines$.subscribe(polylines => {\n      this.context.strokeStyle = '#3b82f6';\n      this.context.lineWidth = 2;\n      polylines.forEach(polyline => {\n        if (polyline.points.length < 2) return;\n        const p0 = this.toCanvasCoordinates(polyline.points[0]);\n        this.context.beginPath();\n        this.context.moveTo(p0.x, p0.y);\n        for (let i = 1; i < polyline.points.length; i++) {\n          const p = this.toCanvasCoordinates(polyline.points[i]);\n          this.context.lineTo(p.x, p.y);\n        }\n        this.context.stroke();\n      });\n    });\n    // Draw markers\n    this.stateService.markers$.subscribe(markers => {\n      markers.forEach(marker => {\n        const canvasCoord = this.toCanvasCoordinates({\n          x: marker.x,\n          y: marker.y\n        });\n        if (marker.marker_type === 'terminal') {\n          this.drawTerminal(canvasCoord.x, canvasCoord.y);\n        } else if (marker.marker_type === 'dropPed') {\n          this.drawDropPed(canvasCoord.x, canvasCoord.y);\n        }\n      });\n    });\n    // Draw current path\n    if (this.currentPath.length > 0) {\n      this.context.strokeStyle = '#10b981';\n      this.context.lineWidth = 2;\n      this.context.setLineDash([5, 5]);\n      const p0 = this.currentPath[0];\n      this.context.beginPath();\n      this.context.moveTo(p0.x, p0.y);\n      for (let i = 1; i < this.currentPath.length; i++) {\n        const p = this.currentPath[i];\n        this.context.lineTo(p.x, p.y);\n      }\n      this.context.stroke();\n      this.context.setLineDash([]);\n    }\n  }\n  drawTerminal(x, y) {\n    if (!this.context) return;\n    const size = 15;\n    const height = size * Math.sqrt(3) / 2;\n    this.context.fillStyle = '#10b981';\n    this.context.strokeStyle = '#ffffff';\n    this.context.lineWidth = 2;\n    this.context.beginPath();\n    this.context.moveTo(x, y - height);\n    this.context.lineTo(x - size / 2, y + height / 2);\n    this.context.lineTo(x + size / 2, y + height / 2);\n    this.context.closePath();\n    this.context.fill();\n    this.context.stroke();\n  }\n  drawDropPed(x, y) {\n    if (!this.context) return;\n    const radius = 12;\n    this.context.fillStyle = '#a855f7';\n    this.context.strokeStyle = '#ffffff';\n    this.context.lineWidth = 2;\n    this.context.beginPath();\n    this.context.arc(x, y, radius, 0, 2 * Math.PI);\n    this.context.fill();\n    this.context.stroke();\n  }\n  static {\n    this.ɵfac = function DrawingCanvasComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || DrawingCanvasComponent)(i0.ɵɵdirectiveInject(i1.StateService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DrawingCanvasComponent,\n      selectors: [[\"app-drawing-canvas\"]],\n      viewQuery: function DrawingCanvasComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvasRef = _t.first);\n        }\n      },\n      inputs: {\n        pdfCanvas: \"pdfCanvas\",\n        viewport: \"viewport\",\n        isActive: \"isActive\",\n        projectId: \"projectId\"\n      },\n      decls: 2,\n      vars: 2,\n      consts: [[\"drawingCanvas\", \"\"], [1, \"absolute\", \"inset-0\", \"cursor-crosshair\", 3, \"click\", \"mousemove\", \"mousedown\", \"mouseup\"]],\n      template: function DrawingCanvasComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵdomElementStart(0, \"canvas\", 1, 0);\n          i0.ɵɵdomListener(\"click\", function DrawingCanvasComponent_Template_canvas_click_0_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onCanvasClick($event));\n          })(\"mousemove\", function DrawingCanvasComponent_Template_canvas_mousemove_0_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onMouseMove($event));\n          })(\"mousedown\", function DrawingCanvasComponent_Template_canvas_mousedown_0_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onMouseDown($event));\n          })(\"mouseup\", function DrawingCanvasComponent_Template_canvas_mouseup_0_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onMouseUp($event));\n          });\n          i0.ɵɵdomElementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵstyleProp(\"pointer-events\", ctx.isActive ? \"auto\" : \"none\");\n        }\n      },\n      dependencies: [CommonModule],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","DrawingCanvasComponent","constructor","stateService","pdfCanvas","isActive","projectId","context","currentPath","viewportScale","pageDims","width","height","isDrawing","ngOnInit","viewport","scale","pageWidth","pageHeight","ngAfterViewInit","canvasRef","canvas","nativeElement","getContext","redraw","ngOnDestroy","onCanvasClick","event","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","pdfCoord","toPdfCoordinates","marker","id","Date","now","project_id","page_number","marker_type","addMarker","onMouseDown","onMouseMove","push","onMouseUp","length","pdfPoints","map","p","polyline","name","points","length_ft","addPolyline","canvasPoint","toCanvasCoordinates","pdfPoint","clearRect","polylines$","subscribe","polylines","strokeStyle","lineWidth","forEach","p0","beginPath","moveTo","i","lineTo","stroke","markers$","markers","canvasCoord","drawTerminal","drawDropPed","setLineDash","size","Math","sqrt","fillStyle","closePath","fill","radius","arc","PI","i0","ɵɵdirectiveInject","i1","StateService","selectors","viewQuery","DrawingCanvasComponent_Query","rf","ctx","ɵɵdomElementStart","ɵɵdomListener","DrawingCanvasComponent_Template_canvas_click_0_listener","$event","ɵɵrestoreView","_r1","ɵɵresetView","DrawingCanvasComponent_Template_canvas_mousemove_0_listener","DrawingCanvasComponent_Template_canvas_mousedown_0_listener","DrawingCanvasComponent_Template_canvas_mouseup_0_listener","ɵɵdomElementEnd","ɵɵstyleProp","encapsulation"],"sources":["/home/dfirth2/fiber_route_calculator/frontend-angular/src/app/components/drawing-canvas/drawing-canvas.component.ts"],"sourcesContent":["import { Component, ViewChild, ElementRef, Input, OnInit, AfterViewInit, OnDestroy } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { StateService, Marker, Polyline } from '../../core/services/state.service';\n\n@Component({\n  selector: 'app-drawing-canvas',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <canvas \n      #drawingCanvas\n      class=\"absolute inset-0 cursor-crosshair\"\n      [style.pointerEvents]=\"isActive ? 'auto' : 'none'\"\n      (click)=\"onCanvasClick($event)\"\n      (mousemove)=\"onMouseMove($event)\"\n      (mousedown)=\"onMouseDown($event)\"\n      (mouseup)=\"onMouseUp($event)\"\n    ></canvas>\n  `\n})\nexport class DrawingCanvasComponent implements OnInit, AfterViewInit, OnDestroy {\n  @ViewChild('drawingCanvas') canvasRef!: ElementRef<HTMLCanvasElement>;\n  @Input() pdfCanvas: HTMLCanvasElement | null = null;\n  @Input() viewport: any;\n  @Input() isActive = false;\n  @Input() projectId: number | null = null;\n\n  private context: CanvasRenderingContext2D | null = null;\n  private currentPath: { x: number; y: number }[] = [];\n  private viewportScale = 1;\n  private pageDims = { width: 1728, height: 2592 };\n  private isDrawing = false;\n\n  constructor(\n    private stateService: StateService\n  ) {}\n\n  ngOnInit() {\n    if (this.viewport) {\n      this.viewportScale = this.viewport.scale || 1;\n      this.pageDims = {\n        width: this.viewport.pageWidth || 1728,\n        height: this.viewport.pageHeight || 2592\n      };\n    }\n  }\n\n  ngAfterViewInit() {\n    if (!this.pdfCanvas || !this.canvasRef) return;\n    const canvas = this.canvasRef.nativeElement;\n    canvas.width = this.pdfCanvas.width;\n    canvas.height = this.pdfCanvas.height;\n    this.context = canvas.getContext('2d');\n    this.redraw();\n  }\n\n  ngOnDestroy() {\n    this.context = null;\n  }\n\n  onCanvasClick(event: MouseEvent) {\n    if (!this.isActive) return;\n    const rect = this.canvasRef.nativeElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    \n    const pdfCoord = this.toPdfCoordinates({ x, y });\n    \n    // Add marker\n    if (this.projectId) {\n      const marker = {\n        id: Date.now(),\n        project_id: this.projectId,\n        page_number: 1,\n        x: pdfCoord.x,\n        y: pdfCoord.y,\n        marker_type: 'terminal'\n      } as Marker;\n      this.stateService.addMarker(marker);\n      this.redraw();\n    }\n  }\n\n  onMouseDown(event: MouseEvent) {\n    this.isDrawing = true;\n    this.currentPath = [];\n  }\n\n  onMouseMove(event: MouseEvent) {\n    if (!this.isDrawing) return;\n    const rect = this.canvasRef.nativeElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    this.currentPath.push({ x, y });\n    this.redraw();\n  }\n\n  onMouseUp(event?: MouseEvent) {\n    if (!this.isDrawing || this.currentPath.length < 2) {\n      this.isDrawing = false;\n      return;\n    }\n\n    this.isDrawing = false;\n    const pdfPoints = this.currentPath.map(p => this.toPdfCoordinates(p));\n    \n    if (this.projectId) {\n      const polyline = {\n        id: Date.now(),\n        project_id: this.projectId,\n        page_number: 1,\n        name: `Route ${Date.now()}`,\n        points: pdfPoints,\n        length_ft: 0\n      } as Polyline;\n      this.stateService.addPolyline(polyline);\n      this.currentPath = [];\n      this.redraw();\n    }\n  }\n\n  private toPdfCoordinates(canvasPoint: { x: number; y: number }): { x: number; y: number } {\n    return {\n      x: canvasPoint.x / this.viewportScale,\n      y: canvasPoint.y / this.viewportScale\n    };\n  }\n\n  private toCanvasCoordinates(pdfPoint: { x: number; y: number }): { x: number; y: number } {\n    return {\n      x: pdfPoint.x * this.viewportScale,\n      y: pdfPoint.y * this.viewportScale\n    };\n  }\n\n  private redraw() {\n    if (!this.context || !this.canvasRef) return;\n\n    const canvas = this.canvasRef.nativeElement;\n    this.context.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Draw polylines\n    this.stateService.polylines$.subscribe((polylines) => {\n      this.context!.strokeStyle = '#3b82f6';\n      this.context!.lineWidth = 2;\n      polylines.forEach((polyline) => {\n        if (polyline.points.length < 2) return;\n        const p0 = this.toCanvasCoordinates(polyline.points[0]);\n        this.context!.beginPath();\n        this.context!.moveTo(p0.x, p0.y);\n        for (let i = 1; i < polyline.points.length; i++) {\n          const p = this.toCanvasCoordinates(polyline.points[i]);\n          this.context!.lineTo(p.x, p.y);\n        }\n        this.context!.stroke();\n      });\n    });\n\n    // Draw markers\n    this.stateService.markers$.subscribe((markers) => {\n      markers.forEach((marker) => {\n        const canvasCoord = this.toCanvasCoordinates({ x: marker.x, y: marker.y });\n        if (marker.marker_type === 'terminal') {\n          this.drawTerminal(canvasCoord.x, canvasCoord.y);\n        } else if (marker.marker_type === 'dropPed') {\n          this.drawDropPed(canvasCoord.x, canvasCoord.y);\n        }\n      });\n    });\n\n    // Draw current path\n    if (this.currentPath.length > 0) {\n      this.context.strokeStyle = '#10b981';\n      this.context.lineWidth = 2;\n      this.context.setLineDash([5, 5]);\n      const p0 = this.currentPath[0];\n      this.context.beginPath();\n      this.context.moveTo(p0.x, p0.y);\n      for (let i = 1; i < this.currentPath.length; i++) {\n        const p = this.currentPath[i];\n        this.context.lineTo(p.x, p.y);\n      }\n      this.context.stroke();\n      this.context.setLineDash([]);\n    }\n  }\n\n  private drawTerminal(x: number, y: number) {\n    if (!this.context) return;\n    const size = 15;\n    const height = size * Math.sqrt(3) / 2;\n    this.context.fillStyle = '#10b981';\n    this.context.strokeStyle = '#ffffff';\n    this.context.lineWidth = 2;\n    this.context.beginPath();\n    this.context.moveTo(x, y - height);\n    this.context.lineTo(x - size / 2, y + height / 2);\n    this.context.lineTo(x + size / 2, y + height / 2);\n    this.context.closePath();\n    this.context.fill();\n    this.context.stroke();\n  }\n\n  private drawDropPed(x: number, y: number) {\n    if (!this.context) return;\n    const radius = 12;\n    this.context.fillStyle = '#a855f7';\n    this.context.strokeStyle = '#ffffff';\n    this.context.lineWidth = 2;\n    this.context.beginPath();\n    this.context.arc(x, y, radius, 0, 2 * Math.PI);\n    this.context.fill();\n    this.context.stroke();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}