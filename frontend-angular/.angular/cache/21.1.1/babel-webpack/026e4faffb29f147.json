{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class StateService {\n  constructor() {\n    this.projectSubject = new BehaviorSubject(null);\n    this.markersSubject = new BehaviorSubject([]);\n    this.polylinesSubject = new BehaviorSubject([]);\n    this.conduitSubject = new BehaviorSubject([]);\n    this.scaleCalibrationSubject = new BehaviorSubject(null);\n    this.project$ = this.projectSubject.asObservable();\n    this.markers$ = this.markersSubject.asObservable();\n    this.polylines$ = this.polylinesSubject.asObservable();\n    this.conduits$ = this.conduitSubject.asObservable();\n    this.scaleCalibration$ = this.scaleCalibrationSubject.asObservable();\n  }\n  setProject(project) {\n    this.projectSubject.next(project);\n  }\n  setMarkers(markers) {\n    this.markersSubject.next(markers);\n  }\n  addMarker(marker) {\n    const current = this.markersSubject.value;\n    this.markersSubject.next([...current, marker]);\n  }\n  setPolylines(polylines) {\n    this.polylinesSubject.next(polylines);\n  }\n  addPolyline(polyline) {\n    const current = this.polylinesSubject.value;\n    this.polylinesSubject.next([...current, polyline]);\n  }\n  setConduits(conduits) {\n    this.conduitSubject.next(conduits);\n  }\n  addConduit(conduit) {\n    const current = this.conduitSubject.value;\n    this.conduitSubject.next([...current, conduit]);\n  }\n  setScaleCalibration(calibration) {\n    this.scaleCalibrationSubject.next(calibration);\n  }\n  static {\n    this.ɵfac = function StateService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || StateService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: StateService,\n      factory: StateService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","StateService","constructor","projectSubject","markersSubject","polylinesSubject","conduitSubject","scaleCalibrationSubject","project$","asObservable","markers$","polylines$","conduits$","scaleCalibration$","setProject","project","next","setMarkers","markers","addMarker","marker","current","value","setPolylines","polylines","addPolyline","polyline","setConduits","conduits","addConduit","conduit","setScaleCalibration","calibration","factory","ɵfac","providedIn"],"sources":["/home/dfirth2/fiber_route_calculator/frontend-angular/src/app/core/services/state.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\nexport interface Project {\n  id: number;\n  name: string;\n  pdf_filename: string;\n  created_at: string;\n  total_length_ft: number;\n}\n\nexport interface Marker {\n  id: number;\n  project_id: number;\n  page_number: number;\n  x: number;\n  y: number;\n  marker_type: string;\n}\n\nexport interface Polyline {\n  id: number;\n  project_id: number;\n  page_number: number;\n  name: string;\n  points: { x: number; y: number }[];\n  length_ft: number;\n}\n\nexport interface Conduit {\n  id: number;\n  project_id: number;\n  terminal_id: number;\n  drop_ped_id: number;\n  footage: number;\n  page_number: number;\n}\n\nexport interface ScaleCalibration {\n  id: number;\n  project_id: number;\n  page_number: number;\n  method: string;\n  scale_factor: number;\n  known_distance_ft?: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StateService {\n  private projectSubject = new BehaviorSubject<Project | null>(null);\n  private markersSubject = new BehaviorSubject<Marker[]>([]);\n  private polylinesSubject = new BehaviorSubject<Polyline[]>([]);\n  private conduitSubject = new BehaviorSubject<Conduit[]>([]);\n  private scaleCalibrationSubject = new BehaviorSubject<ScaleCalibration | null>(null);\n\n  project$ = this.projectSubject.asObservable();\n  markers$ = this.markersSubject.asObservable();\n  polylines$ = this.polylinesSubject.asObservable();\n  conduits$ = this.conduitSubject.asObservable();\n  scaleCalibration$ = this.scaleCalibrationSubject.asObservable();\n\n  setProject(project: Project) {\n    this.projectSubject.next(project);\n  }\n\n  setMarkers(markers: Marker[]) {\n    this.markersSubject.next(markers);\n  }\n\n  addMarker(marker: Marker) {\n    const current = this.markersSubject.value;\n    this.markersSubject.next([...current, marker]);\n  }\n\n  setPolylines(polylines: Polyline[]) {\n    this.polylinesSubject.next(polylines);\n  }\n\n  addPolyline(polyline: Polyline) {\n    const current = this.polylinesSubject.value;\n    this.polylinesSubject.next([...current, polyline]);\n  }\n\n  setConduits(conduits: Conduit[]) {\n    this.conduitSubject.next(conduits);\n  }\n\n  addConduit(conduit: Conduit) {\n    const current = this.conduitSubject.value;\n    this.conduitSubject.next([...current, conduit]);\n  }\n\n  setScaleCalibration(calibration: ScaleCalibration) {\n    this.scaleCalibrationSubject.next(calibration);\n  }\n}\n"],"mappings":"AACA,SAASA,eAAe,QAAoB,MAAM;;AAiDlD,OAAM,MAAOC,YAAY;EAHzBC,YAAA;IAIU,KAAAC,cAAc,GAAG,IAAIH,eAAe,CAAiB,IAAI,CAAC;IAC1D,KAAAI,cAAc,GAAG,IAAIJ,eAAe,CAAW,EAAE,CAAC;IAClD,KAAAK,gBAAgB,GAAG,IAAIL,eAAe,CAAa,EAAE,CAAC;IACtD,KAAAM,cAAc,GAAG,IAAIN,eAAe,CAAY,EAAE,CAAC;IACnD,KAAAO,uBAAuB,GAAG,IAAIP,eAAe,CAA0B,IAAI,CAAC;IAEpF,KAAAQ,QAAQ,GAAG,IAAI,CAACL,cAAc,CAACM,YAAY,EAAE;IAC7C,KAAAC,QAAQ,GAAG,IAAI,CAACN,cAAc,CAACK,YAAY,EAAE;IAC7C,KAAAE,UAAU,GAAG,IAAI,CAACN,gBAAgB,CAACI,YAAY,EAAE;IACjD,KAAAG,SAAS,GAAG,IAAI,CAACN,cAAc,CAACG,YAAY,EAAE;IAC9C,KAAAI,iBAAiB,GAAG,IAAI,CAACN,uBAAuB,CAACE,YAAY,EAAE;;EAE/DK,UAAUA,CAACC,OAAgB;IACzB,IAAI,CAACZ,cAAc,CAACa,IAAI,CAACD,OAAO,CAAC;EACnC;EAEAE,UAAUA,CAACC,OAAiB;IAC1B,IAAI,CAACd,cAAc,CAACY,IAAI,CAACE,OAAO,CAAC;EACnC;EAEAC,SAASA,CAACC,MAAc;IACtB,MAAMC,OAAO,GAAG,IAAI,CAACjB,cAAc,CAACkB,KAAK;IACzC,IAAI,CAAClB,cAAc,CAACY,IAAI,CAAC,CAAC,GAAGK,OAAO,EAAED,MAAM,CAAC,CAAC;EAChD;EAEAG,YAAYA,CAACC,SAAqB;IAChC,IAAI,CAACnB,gBAAgB,CAACW,IAAI,CAACQ,SAAS,CAAC;EACvC;EAEAC,WAAWA,CAACC,QAAkB;IAC5B,MAAML,OAAO,GAAG,IAAI,CAAChB,gBAAgB,CAACiB,KAAK;IAC3C,IAAI,CAACjB,gBAAgB,CAACW,IAAI,CAAC,CAAC,GAAGK,OAAO,EAAEK,QAAQ,CAAC,CAAC;EACpD;EAEAC,WAAWA,CAACC,QAAmB;IAC7B,IAAI,CAACtB,cAAc,CAACU,IAAI,CAACY,QAAQ,CAAC;EACpC;EAEAC,UAAUA,CAACC,OAAgB;IACzB,MAAMT,OAAO,GAAG,IAAI,CAACf,cAAc,CAACgB,KAAK;IACzC,IAAI,CAAChB,cAAc,CAACU,IAAI,CAAC,CAAC,GAAGK,OAAO,EAAES,OAAO,CAAC,CAAC;EACjD;EAEAC,mBAAmBA,CAACC,WAA6B;IAC/C,IAAI,CAACzB,uBAAuB,CAACS,IAAI,CAACgB,WAAW,CAAC;EAChD;;;uCA9CW/B,YAAY;IAAA;EAAA;;;aAAZA,YAAY;MAAAgC,OAAA,EAAZhC,YAAY,CAAAiC,IAAA;MAAAC,UAAA,EAFX;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}